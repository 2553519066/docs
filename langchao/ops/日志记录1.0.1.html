<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>操作日志查询接口文档 1.0.1 | 浪潮技术文档</title><meta name="description" content="浪潮项目在线文档系统">
    <link rel="preload" href="/langchao/assets/style-C5QREZ3P.css" as="style"><link rel="stylesheet" href="/langchao/assets/style-C5QREZ3P.css">
    <link rel="modulepreload" href="/langchao/assets/app-Buc66nam.js"><link rel="modulepreload" href="/langchao/assets/日志记录1.0.1.html-CbNNidvA.js">
    <link rel="prefetch" href="/langchao/assets/index.html-DUbLeCOY.js" as="script"><link rel="prefetch" href="/langchao/assets/index.html--HMXRbOx.js" as="script"><link rel="prefetch" href="/langchao/assets/日志记录.html-DGafXXpp.js" as="script"><link rel="prefetch" href="/langchao/assets/block.html-DIqUmu21.js" as="script"><link rel="prefetch" href="/langchao/assets/dialog.html-lrL-u5O_.js" as="script"><link rel="prefetch" href="/langchao/assets/form.html-BOKOsZV7.js" as="script"><link rel="prefetch" href="/langchao/assets/pagination.html-7nhyJmYF.js" as="script"><link rel="prefetch" href="/langchao/assets/index.html-DBYpL2w9.js" as="script"><link rel="prefetch" href="/langchao/assets/tableV2.html-BZmzm2PF.js" as="script"><link rel="prefetch" href="/langchao/assets/index.html-cUmyAwto.js" as="script"><link rel="prefetch" href="/langchao/assets/任务填报记录接口前端对接文档.html-CxoU787K.js" as="script"><link rel="prefetch" href="/langchao/assets/国家一表通前端对接文档.html-Dl0gOGVm.js" as="script"><link rel="prefetch" href="/langchao/assets/404.html-BJKyksEf.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/langchao/"><!----><span class="vp-site-name" aria-hidden="true">浪潮技术文档</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/langchao/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/langchao/view/" aria-label="视图组件"><!--[--><!--[--><!--]--><!--]-->视图组件<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/langchao/web/" aria-label="Web 接口"><!--[--><!--[--><!--]--><!--]-->Web 接口<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/langchao/ops/" aria-label="运维文档"><!--[--><!--[--><!--]--><!--]-->运维文档<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/langchao/" aria-label="首页"><!--[--><!--[--><!--]--><!--]-->首页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/langchao/view/" aria-label="视图组件"><!--[--><!--[--><!--]--><!--]-->视图组件<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/langchao/web/" aria-label="Web 接口"><!--[--><!--[--><!--]--><!--]-->Web 接口<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/langchao/ops/" aria-label="运维文档"><!--[--><!--[--><!--]--><!--]-->运维文档<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">运维文档 <!----></p><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/langchao/ops/%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95.html" aria-label="操作日志查询接口文档"><!--[--><!--[--><!--]--><!--]-->操作日志查询接口文档<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/langchao/ops/%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%951.0.1.html" aria-label="操作日志查询接口文档 1.0.1"><!--[--><!--[--><!--]--><!--]-->操作日志查询接口文档 1.0.1<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="操作日志查询接口文档-1-0-1" tabindex="-1"><a class="header-anchor" href="#操作日志查询接口文档-1-0-1"><span>操作日志查询接口文档 1.0.1</span></a></h1><ul><li><strong>Controller</strong>: <code>Inspur.Abp.Platform.ApiLogs.LogController</code></li><li><strong>Base Route</strong>: <code>/api/platform/log</code></li><li><strong>Remote Service Name</strong>: <code>PlatformLog</code></li><li><strong>Namespaces Referenced</strong>: <code>Inspur.Abp.Platform.ApiLogs</code></li></ul><hr><h2 id="_1-get-api-platform-log" tabindex="-1"><a class="header-anchor" href="#_1-get-api-platform-log"><span>1. GET <code>/api/platform/log</code></span></a></h2><p>分页查询日志记录。</p><h3 id="请求" tabindex="-1"><a class="header-anchor" href="#请求"><span>请求</span></a></h3><ul><li><strong>Method</strong>: <code>GET</code></li><li><strong>Query Parameters</strong>: <code>LogPagedAndSortedResultRequestDto</code><table><thead><tr><th>参数</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td><code>SkipCount</code></td><td><code>int</code></td><td>跳过条数，默认 0</td></tr><tr><td><code>MaxResultCount</code></td><td><code>int</code></td><td>返回条数，默认 10</td></tr><tr><td><code>Sorting</code></td><td><code>string</code></td><td>排序字段，如 <code>ActionTime DESC</code></td></tr><tr><td><code>Filter</code></td><td><code>string</code></td><td>全局模糊查询关键字</td></tr><tr><td><code>UserId</code></td><td><code>Guid?</code></td><td>过滤指定用户</td></tr><tr><td><code>DepartmentId</code></td><td><code>Guid?</code></td><td>过滤指定部门</td></tr><tr><td><code>UserName</code></td><td><code>string</code></td><td>过滤用户名（模糊）</td></tr><tr><td><code>RoleName</code></td><td><code>string</code></td><td>过滤角色名称（模糊）</td></tr><tr><td><code>YkzUid</code></td><td><code>string</code></td><td>过滤愉快政 UID（模糊）</td></tr><tr><td><code>ActionModule</code></td><td><code>string</code></td><td>过滤模块（模糊）</td></tr><tr><td><code>ActionContent</code></td><td><code>string</code></td><td>过滤操作描述（模糊）</td></tr><tr><td><code>ActionType</code></td><td><code>string</code></td><td>过滤操作类型（模糊）</td></tr><tr><td><code>ExpandInformation</code></td><td><code>string</code></td><td>过滤扩展信息（模糊）</td></tr><tr><td><code>ActionStatus</code></td><td><code>bool?</code></td><td>过滤是否成功</td></tr><tr><td><code>OperatingEquipment</code></td><td><code>string</code></td><td>过滤设备信息（模糊）</td></tr><tr><td><code>UserAgent</code></td><td><code>string</code></td><td>过滤 UserAgent（模糊）</td></tr><tr><td><code>Ip</code></td><td><code>string</code></td><td>过滤 IP 地址（模糊）</td></tr><tr><td><code>StartTime</code></td><td><code>DateTime?</code></td><td>操作起始时间（含）</td></tr><tr><td><code>EndTime</code></td><td><code>DateTime?</code></td><td>操作结束时间（含）</td></tr></tbody></table></li></ul><h3 id="响应" tabindex="-1"><a class="header-anchor" href="#响应"><span>响应</span></a></h3><ul><li><strong>类型</strong>: <code>PagedResultDto&lt;LogItemDto&gt;</code><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;totalCount&quot;</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;items&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GUID&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;userId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;GUID&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;userName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;roles&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;ykzUid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;actionModule&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;actionContent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;actionType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;actionStatus&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;actionTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2025-12-08T03:00:00Z&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;operatingEquipment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;userAgent&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;expandInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      ...  <span class="token comment">// 其他 LogItemDto 字段</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h2 id="_2-post-api-platform-log-create" tabindex="-1"><a class="header-anchor" href="#_2-post-api-platform-log-create"><span>2. POST <code>/api/platform/log/create</code></span></a></h2><p>创建一条指定模块/操作的日志记录，使用当前登录用户与请求上下文信息。</p><h3 id="请求-1" tabindex="-1"><a class="header-anchor" href="#请求-1"><span>请求</span></a></h3><ul><li><strong>Method</strong>: <code>POST</code></li><li><strong>Body</strong>: 按当前 Controller 签名需要分别传递 <code>modelName</code> 和 <code>actionName</code>。 <blockquote><p><strong>建议</strong>：使用一个 DTO 容器进行序列化，例如：</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;modelName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;任务驾驶舱&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;actionName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;操作描述&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote></li></ul><h3 id="响应-1" tabindex="-1"><a class="header-anchor" href="#响应-1"><span>响应</span></a></h3><ul><li><strong>类型</strong>: <code>void</code>（执行成功返回 <code>200 OK</code>，无响应体）。</li></ul><hr><h2 id="_3-get-api-platform-log-user-login-log-statistics" tabindex="-1"><a class="header-anchor" href="#_3-get-api-platform-log-user-login-log-statistics"><span>3. GET <code>/api/platform/log/user-login-log-statistics</code></span></a></h2><p>统计登录相关数据。</p><h3 id="请求-2" tabindex="-1"><a class="header-anchor" href="#请求-2"><span>请求</span></a></h3><ul><li><strong>Method</strong>: <code>GET</code></li><li><strong>Query Parameters</strong>: 无</li></ul><h3 id="响应-2" tabindex="-1"><a class="header-anchor" href="#响应-2"><span>响应</span></a></h3><ul><li><p><strong>类型</strong>: <code>`List&lt;NameValue&lt;int&gt;&gt;`</code></p><ul><li>典型键值： <table><thead><tr><th>Key</th><th>含义</th></tr></thead><tbody><tr><td><code>today</code></td><td>当天（00:00-23:59）登录次数</td></tr><tr><td><code>vpn</code></td><td>IP 包含 <code>23.99.94.200</code> 的登录次数</td></tr><tr><td><code>outNetwork</code></td><td>非 <code>23.99.94.200</code> IP 的登录次数</td></tr></tbody></table></li></ul><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">[</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;today&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">58</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vpn&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;outNetwork&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">46</span> <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><hr><h2 id="_4-get-api-platform-log-login-list" tabindex="-1"><a class="header-anchor" href="#_4-get-api-platform-log-login-list"><span>4. GET <code>/api/platform/log/login-list</code></span></a></h2><p>分页获取 <code>/connect/token</code> 登录日志。</p><h3 id="请求-3" tabindex="-1"><a class="header-anchor" href="#请求-3"><span>请求</span></a></h3><ul><li><strong>Method</strong>: <code>GET</code></li><li><strong>Query Parameters</strong>: <code>LogPagedAndSortedResultRequestDto</code><ul><li>与“分页查询日志”相同，但自动限定 <code>ExpandInformation</code> 包含 <code>/connect/token</code>。</li><li>常用过滤字段：<code>UserName</code>、<code>YkzUid</code>、<code>OperatingEquipment</code>、<code>UserAgent</code>、<code>Ip</code>、<code>StartTime</code>、<code>EndTime</code>。</li></ul></li></ul><h3 id="响应-3" tabindex="-1"><a class="header-anchor" href="#响应-3"><span>响应</span></a></h3><ul><li><strong>类型</strong>: <code>PagedResultDto&lt;LogItemDto&gt;</code>（同上）。</li></ul><hr><h2 id="备注" tabindex="-1"><a class="header-anchor" href="#备注"><span>备注</span></a></h2><ol><li>Controller 中标记 <code>[NonAction]</code> 的方法（<code>GetAsync</code>、<code>CreateAsync</code>、<code>UpdateAsync</code>、<code>DeleteAsync</code>）不会对外暴露；实际调用走内部应用服务。</li><li><code>CreateLogAsync</code> 调用了 <code>LogAppService</code>： <ul><li>自动填充当前用户的部门、角色、愉快政 UID。</li><li>使用 <code>HttpContext</code> 获取 <code>User-Agent</code> 与 <code>IP</code>。</li><li>最终委托 <code>ILogManager</code> 落库。</li></ul></li><li>若需要在 Swagger 等工具中正常使用 <code>POST /create</code>，建议改造为接收 DTO 或单个对象。</li></ol></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">最后更新: </span><time class="meta-item-info" datetime="2025-12-18T03:03:44.000Z" data-allow-mismatch>2025/12/18 11:03</time></div><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/langchao/ops/%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95.html" aria-label="操作日志查询接口文档"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">操作日志查询接口文档</span></div><!--]--></a><!----></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/langchao/assets/app-Buc66nam.js" defer></script>
  </body>
</html>
